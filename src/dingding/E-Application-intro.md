# E应用简介

## 和传统H5开发区别

E应用无需下载，使用原生组件进行渲染，更加流畅高效。

## 遇到的坑

### TabBar

在App.json文件中配置了tabBar属性后，死活没有出现底部导航，最后发现是因为pages属性配置的第一页面必须为Tab首页，而我在tabBar里面配置的是其它页面，导致默认打开的是首页，而首页不属于tabBar，所以一直没有效果。

总结就是：pages里面配置的第一个页面路径，必须在tabBar中进行配置，且必须一致（加与不加前缀）。

### 图片不显示

默认的小程序项目模板，在app.json里面会有默认的首页配置，但是这个配置的路径前缀并没有`/`或者`./`，让我以为在小程序里没有特殊描述默认就是从项目根目录开始找的。

然后我在编写页面时，因为用到了图片，然后在页面data中定义了图片路径，死活没有出来，同样的路径我把它配置到App.json的tabBar中就可以正常显示。后来我猜测是路径解析的问题，就在页面data定义的路径加上`/`前缀，问题得以解决。最后我在App.json中，也加上`/`前缀测试是否也可行，结果告诉我一切正常，所以无论什么路径，统一加前缀是好的。

总结就是：凡是路径，一定要加上`/`绝对和`./`相对前缀。

### 路径问题 - {App.json} 与 {页面.json}

后来发现，IDE 对文件有缓存，如果修改了某个文件的路径，这个文件的原路径仍然可用，造成错误无法及时显现，后续出现造成困扰。所以为了保证应用运行无误，避免后期埋坑，一旦目录结构或者文件名称有变动，那么一定要按刷新按钮(清除缓存)。

也因为此后来发现，App.json 中的路径不能添加`/`前缀，所以这里的 pages 和 tabBar 配置走默认的不能加`/`前缀是最可靠的，加了可能会报`References Error：Page is not defined`错误。

`页面.json` 和 `页面.js` 中使用的路径，一定要加前缀。

### 路由跳转 -- 后来发现没有此问题

调用API进行路由的跳转，只能通过API返回，页面Header是没有返回按钮的；如果页面需要返回按钮，那么必须使用navigator组件包裹被点击区域实现跳转。

### 应用上传 - 文件命名限制

应用上传时需要保证文件或者文件夹名称内没有 `@` 符号，否则无法上传。这个情况主要发生在 UI 给的 icon 图片，一般有 @2x 和 @3x 高清图，需要事先告诉 UI，尽量使用 - 分割符，或者自行修改。

### 应用上传 - 项目大小限制

项目大小不能超过 5MB，否则无法上传，用户首页使用体验也不好。另外的项目需要使用eslint和其它工具，一个eslint依赖就突破了 5MB 的限制，所以最后决定把 E应用 整体代码放置到 src 目录下，上传真机测试时只把 src 目录上传。

只把 src 目录上传还有一个问题，就是项目如果依赖了 npm 包，那么就会出现问题，因为现在项目依赖少，只有一个 UI 包，同时项目进度赶，所以目前就简单的把包下载下来一起放置到了 src 目录下，将来有时间要集成 webpack 或其它构建工具，自动化处理。
