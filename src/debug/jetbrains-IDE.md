# Debug

Debug 用来追踪代码的运行流程，通常在程序运行过程中出现异常，启用 Debug 模式可以分析定义异常发生的位置，
以及在运行过程中参数的变化。<br />

## 断点模式

在 IDEA 中启动 Debug 模式后，会进入如下的界面：
![断点界面]()

1. 以 Debug 模式运行程序，左边的一个按钮是以 Run 模式启动。在开发中，我们一般会直接启动 Debug 模式，方便随时调试。

2. 断点：在左边行号栏单击左键，或者快捷键 Ctrl + F8 打开/取消断点，断点行的颜色可自行设置。

3. Debug 窗口：程序执行到第一个断点后，会自动激活 Debug 窗口。如果没有，可以去设置里修改 Setting > Build, Execution, Deployment > Debugger > Show debug window on breakpoint。

4. 调试按钮：一共有8个按钮，调试的主要功能就通过这8个按钮完成。鼠标悬停在按钮上，会有相应的快捷键提示，这些按键在菜单栏 Run 一项里也有列表展示。

5. 服务按钮：可以在这里关闭/启动服务，设置断点等。

6. 方法调用栈：这里显示了该线程调试所经过的所有方法，右上角有过滤按钮，可以过滤掉其他类库的方法。

7. Variables：在变量区可以查看当前断点之前的当前方法内的变量。

8. Watches：查看变量，可以将 Variables 区中的变量拖到 Watches 中查看。

## 调试按钮

![断点控制按钮组]()

1. Show Execution Point (Alt + F10)：如果你的光标在其它行或其它页面，点击这个按钮可跳转到当前代码执行的行。

2. step Over (F8)：单步跳过，一行一行地往下走，如果这一行上有方法不会进去方法。

3. stop Into (F7)：单步跳入，如果当前行有方法，可以进去方法内部，一般用于进入自定义方法内，不会进入官网类库。

4. Force Step Into (Shift + Alt + F7)：强制步入，能进入任何方法，查看底层源码的时候可以用这个进入官方类库。

5. Step Out (Shift + F8)：单步跳出，从步入的方法内退出到方法调用处，此时方法已执行完毕，只是还没有完成赋值。

6. Drop Frame：回退断点，该功能无法使用，忽略即可。

7. Run to Cursor (Alt + F9)：运行到光标处，你可以将光标定位到你需要查看的那一行，然后使用这个功能，代码会运行至光标行，而不需要打断点。

8. Evaluate Expression (Alt + F8)：计算表达式。

## 运行控制按钮

![运行控制按钮组]()

1. 重新运行程序，会关闭服务后重新启动程序。

2. 刷新

3. Resume Program（F9）：运行至下一个断点处。

4. Pause Program；暂停程序，启用 Debug。

5. Stop（Ctrl + F2）：终止程序，可能服务关闭不完全，造成端口占用，需要手动杀掉 JVM 进程。

6. View Breakpoints（Ctrl + Shift + F8）：查看所有断点。

7. Mute BreakPoints：断点开头，点击后断点失效变为灰色，再次点击断点生效变为红色。

## 设置断点条件

通过设置断点条件，让程序在满足条件时才停在断点，可以提高调试效率。
比如遍历一个集合，在循环内设置一个断点，一个一个看很累，如果加上断点条件就会事半功倍。

1. 在红色断点上右键，便会弹出断点条件对话框。

2. 可在 Condition 里输入条件，或者点击 More(Ctrl + Shift + F8) 查看所有断点进行详细配置。

3. 勾选 Log message to console，则会将当前断点行输出到控制台。

4. 勾选 Evaluate and log，可以在执行这行代码时计算表达式的值，并将结果输出到控制台。
