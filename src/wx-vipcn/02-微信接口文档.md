# 微信公众平台接口文档

[官方接口文档首页](https://mp.weixin.qq.com/wiki)

> 1. 微信提供的每个接口都有调用频次的限制。
> 2. 每个接口调用时都需要access_token凭证，这个凭证可通过公众号appid与secret获取。
> 3. access_token凭证有效期为2小时，过期后需要重新获取。
> 4. 接口调用必须使用80端口。
> 5. 如果接口需要区分用户，可以使用OpenID。
> 6. 如果多个公众号或应用要用户互通，可以把它们绑定在一个开放平台账户下，然后它们对同一个用户的UnionID就会相同。

## 服务方式
 
### 消息

消息会话是公众号与用户交互的基础，目前主要有如下几类消息类型，分别对应不同场景。

> 1. 群发消息：订阅号每天1次，服务号每月4次
> 2. 自动回复：粉丝发送1条消息，微信服务器收到消息，然后转发给我们服务器，我们返回1条消息给微信，微信再响应给粉丝。
> 3. 客服消息：粉丝发送1条消息，48小时内我们可以回复粉丝任意多条消息，主要用于客服场景。
> 4. 模板消息：粉丝发送1条消息，我们用提前设置好的内容模板进行回复。

### 内嵌H5页面

复杂的业务场景需要通过网页形式提示服务，比如新闻预览、商品买卖等等，这时可能需要以下东东：

> 1. 获取用户信息：OpenID无需用户同意，基本信息需要用户同意
> 2. 调用微信API：使用微信提供的JS-SDK工具包，在H5页面调用微信功能

## 开发规范

这些规范都是微信的要求，违反严重可能被封号，看看就好。

### 用户数据

1. 获取用户信息必须先获得用户同意
2. 获取到的用户信息要保密，不要随意传播

### 其它

1. 不要打点跟踪用户行为
2. 不要把网页重定向到不相干的地方
3. 内容合法，不违法社会公德
4. 与腾讯无关，不要扯近乎

## 能力与接口权限

[公众号接口调用权限官方文档](https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1433401084)

未认证的订阅号与服务号，只能调用除用户相关的少许接口。

订阅号与服务号可以调用用户相关接口，但是因为服务号定位与企业，所以可调用的接口更多，主要是多了开店与支付相关的接口。

## 接口请求结果状态码

[公众号接口状态码含义官方查阅文档](https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1433747234)

调用微信接口时，可能获得正确或错误的状态码，开发者可以根据状态码调试接口，排查错误。
