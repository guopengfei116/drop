# Linux常见错误

## ping: unknown host

### 本地不通

如果ping ip报错，应该是网关配置错误，需要检查网络配置是否错误或者不全，没问题的话测试网关是否可用，不可用的话检查虚拟网卡的网关配置，保证Linux网络配置中的网关与虚拟网卡中的网关配置一致。

```shell
# 查看网络配置，是否正常列出IP地址等信息
ifconfig -a
# 错误的话，修改或补全问题项
vim /etc/sysconfig/network-scripts/ifcfg-enp***

# 查看网关是否可用
ping 192.168.12.254(按照自身情况来写)
```

最后测试能否ping通宿主主机

```shell
# 重启网络
service network restart

# 测试
ping 1921.68.94.54(宿主主机IP)
```

### 网络不通

如果ping ip没有问题，ping 域名有问题，那么应该是DNS服务器配置文件缺少nameserver。

```shell
# 编辑配置文件
vim /etc/resolv.conf

# 配置网关，可配多个
namaserver 192.168.12.254(按照自身情况来写)
namaserver 8.8.8.8
```

最后测试能否ping通网络地址

```shell
# 重启网络
service network restart

# 测试
ping baidu.com(任意网络地址)
```

## ping: Device does not seem to be present

一.故障现象：
[root@c1node01 ~]# service network restart
Shutting down loopback insterface:                                                       [   OK  ]
Bringing up loopback insterface:                                                            [   OK  ]
Bringing up interface eth0:  Device eth0 does not seem to be present,delaying initialization.                    [FAILED]
 
解决办法：
[root@c1node01 ~]# rm -rf /etc/udev/rules.d/70-persistent-net.rules
[root@c1node01 ~]# reboot ………………
[root@c1node01 ~]# service network restart
Shutting down loopback insterface:                                                         [   OK   ]
Bringing up loopback insterface:                                                              [   OK   ]
Bringing up interface eth0:                                                                     [   OK   ]
[root@c1node01 ~]#
 
二.另一种方法
造成这样的原因，是因为在虚拟机（Vmware）中移动了Centos系统对应的文件，导致重新配置时，网卡的MAC地址变了，输入ifconfig -a,找不到eth0
·······
 
安装完一个centos虚拟机，又拷贝一份，开机后网卡无法正常启动，报错：Device eth0 does not seem to be present, 
delaying initialization

解决：# mv /etc/sysconfig/network-scripts/ifcfg-eth0 
sysconfig/network-scripts/ifcfg-eth1

vim 
sysconfig/network-scripts/ifcfg-eth1

修改DEVICE="eth0" 
为DEVICE="eth1"

可删掉uuid、物理地址

然后重启启动网卡尝试下
 
三.比第一种更深入一点
 
 
故障前的操作：

DELL刀片装的是CentOS6.3的操作系统，网卡识别的是em1和em2，由于工作需要做了槽位调整，并启动了刀片

 

故障现象：

启动后网络不通，通过iDRAC登录后route查看缺省路由正常；

重启网络服务：

[root@nodeA ~]# service network restart Shutting down loopback insterface: [ OK ] Bringing up loopback insterface: [ OK ] Bringing up interface em1: Device em1 does not seem to be present,delaying initialization. [FAILED]

 

分析问题和解决：

之前在别的文章中我们提过70-persistent-net.rules文件，所以看了一下：

[root@nodeA ~]# vi /etc/udev/rules.d/70-persistent-net.rules

# This file was automatically generated by the /lib/udev/write_net_rules # program, run by the persistent-net-generator.rules rules file. # # You can modify it, as long as you keep each rule on a single # line, and change only the value of the NAME= key.

# PCI device 0x14e4:0x163a (bnx2) SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="24:b6:fd:ab:76:1e", ATTR{type}=="1", KERNEL=="eth*", NAME="eth1"

# PCI device 0x14e4:0x163a (bnx2) SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="24:b6:fd:ab:76:1c", ATTR{type}=="1", KERNEL=="eth*", NAME="eth0"

发现NAME的名称不正确，依次将上述红色字体中的eth0改为em1，eth1改为em2；

*切记：网卡编号由MAC地址大小决定，MAC越小网卡编号越小；

如下：

…………

# PCI device 0x14e4:0x163a (bnx2)

SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="24:b6:fd:ab:76:1e", ATTR{type}=="1", KERNEL=="eth*", NAME="em2"

# PCI device 0x14e4:0x163a (bnx2) SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="24:b6:fd:ab:76:1c", ATTR{type}=="1", KERNEL=="eth*", NAME="em1"

保存退出~！

[root@nodeA ~]#reboot

………………

问题解决~！